

 CREATE TABLE USUARIO
 (
   RUT CHAR(8) NOT NULL,
   DV VARCHAR(1) NOT NULL,
   PASS VARCHAR (20) NOT NULL,
   NOMBRE VARCHAR(20) NOT NULL,
   CORREO VARCHAR(40) NOT NULL,
   TELEFONO INT(10) NOT NULL,
   TIPOUSUARIO VARCHAR (20) NOT NULL,
   CODPISO VARCHAR(20) not null

 );





 CREATE TABLE PISO
 (
   CODPISO VARCHAR(6) NOT NULL,
   CODED VARCHAR(6) NOT NULL

 );



 CREATE TABLE EDIFICIO
 (

   CODED VARCHAR(6) NOT NULL,
   NOMBREED VARCHAR(100) NOT NULL

 );






CREATE TABLE SALA
 (
   CODSALA VARCHAR(6) NOT NULL,
   QR VARCHAR(10) NOT NULL,
  CODPISO VARCHAR(6) NOT NULL


 );





CREATE TABLE SOLICITUD
(
  CODSOL VARCHAR(20)NOT NULL,
  DIA VARCHAR (20)NOT NULL,
  RAMO VARCHAR(40)NOT NULL,
  PERIODO FLOAT(2,0) NOT NULL,
  SEMESTRE VARCHAR(20)NOT NULL,
  RUT CHAR(9) NOT NULL,
  CODSALA VARCHAR(6) NOT NULL

);





CREATE TABLE COMENTARIO
(
  CODCOM VARCHAR(20)NOT NULL,
  FECHACOM DATE NOT NULL,
  HORA INT(10)NOT NULL,
  RUT CHAR(9) NOT NULL,
  CODSALA VARCHAR(6) NOT NULL
);





CREATE TABLE IMPLEMENTO
(
  CODIM VARCHAR(20) NOT NULL,
  TIPOIMPLE VARCHAR(30) NOT NULL,
  CANTIDAD FLOAT(3,0) NOT NULL,
  ESTADO VARCHAR (10) NOT NULL,
  CODSALA VARCHAR(20) NOT NULL
);





ALTER TABLE  USUARIO
ADD CONSTRAINT PK_USUARIO PRIMARY KEY (RUT);


ALTER TABLE  EDIFICIO
ADD CONSTRAINT PK_EDIFICIO PRIMARY KEY (CODED);

ALTER TABLE  PISO
ADD CONSTRAINT PK_PISO PRIMARY KEY (CODPISO);

ALTER TABLE  SALA
ADD CONSTRAINT PK_SALA PRIMARY KEY (CODSALA);


ALTER TABLE  SOLICITUD
ADD CONSTRAINT PK_SOLICITUD PRIMARY KEY (CODSOL);

ALTER TABLE  COMENTARIO
ADD CONSTRAINT PK_COMENTARIO PRIMARY KEY (CODCOM);


ALTER TABLE  IMPLEMENTO
ADD CONSTRAINT PK_IMPLEMENTO PRIMARY KEY (CODIM);









ALTER TABLE  USUARIO
    ADD CONSTRAINT FK_USUARIO_PISO
    FOREIGN KEY (CODPISO)
    REFERENCES PISO(CODPISO);

ALTER TABLE PISO
    ADD CONSTRAINT FK_EDIFICIO_PISO
	FOREIGN KEY (CODED)
	REFERENCES EDIFICIO(CODED);


ALTER TABLE  COMENTARIO
    ADD CONSTRAINT FK_COMENTARIO_USUARIO
    FOREIGN KEY (RUT)
    REFERENCES USUARIO(RUT);




ALTER TABLE  COMENTARIO
    ADD CONSTRAINT FK_COMENTARIO_SALA
    FOREIGN KEY (CODSALA)
    REFERENCES SALA(CODSALA);



ALTER TABLE  SOLICITUD
    ADD CONSTRAINT FK_SOLICITUD_USUARIO
    FOREIGN KEY (RUT)
    REFERENCES USUARIO(RUT);




ALTER TABLE  SOLICITUD
    ADD CONSTRAINT FK_SOLICITUD_SALA
    FOREIGN KEY (CODSALA)
    REFERENCES SALA(CODSALA);




ALTER TABLE  SALA
    ADD CONSTRAINT FK_SALA_PISO
    FOREIGN KEY (CODPISO)
    REFERENCES PISO(CODPISO);

ALTER TABLE  IMPLEMENTO
    ADD CONSTRAINT FK_IMPLEMENTO_SALA
    FOREIGN KEY (CODSALA)
    REFERENCES SALA(CODSALA);









ALTER TABLE USUARIO
  ADD CONSTRAINT CK_TIPOUSUARIO
  CHECK(TIPOUSUARIO IN (PROFESOR,SECRETARIA,MAYORDOMO));

ALTER TABLE IMPLEMENTO
  ADD CONSTRAINT CK_TIPOIMPLE
  CHECK(TIPOIMPLE IN (PROYECTOR,BORRADOR,PC));

ALTER TABLE IMPLEMENTO
  ADD CONSTRAINT CK_ESTADO
  CHECK(ESTADO IN (MALO,BUENO));



ALTER TABLE SOLICITUD
  ADD CONSTRAINT CK_DIA
  CHECK(DIA IN (lunes,martes,miercoles,jueves,viernes,sabado,domingo));
